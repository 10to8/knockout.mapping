// Knockout Mapping plugin v0.5
// (c) 2010 Steven Sanderson, Roy Jacobs - http://knockoutjs.com/
// License: Ms-Pl (http://www.opensource.org/licenses/ms-pl.html)

ko.d=function(n,m){for(var g=n.split("."),k=window,j=0;j<g.length-1;j++)k=k[g[j]];k[g[g.length-1]]=m};ko.u=function(n,m,g){n[m]=g};
(function(){function n(a){if(a&&typeof a==="object"&&a.constructor.toString().match(/date/i)!==null)return"date";return typeof a}function m(a){a=a||{};a.f=a.f||{};a.e=a.e||{};a.i=a.i||{};return a}function g(a,b,c,d,e){var h=ko.a.c(b)instanceof Array;d=d||new s;if(d.h(b))return a;e=e||"root";if(c.f[e]&&r(b)&&!h){var o=m(),f=c.f[e](b,e);a=g(undefined,f,o)}if(h){if(!ko.n(a)){a=ko.z([]);x(a,c,e)}var l=function(i){return i};if(c.e[e])l=c.e[e];t(ko.a.c(a),b,e,l,function(i,q){switch(i){case "added":var p=
ko.a.c(g(undefined,q,c,d,e));a.push(p);break;case "retained":p=j(a,k(q,l),l);g(p,q,c,d);break;case "deleted":p=j(a,k(q,l),l);a.remove(p)}})}else if(r(b)){a||(a={});d.save(b,a);u(b,function(i){ko.n(a[i])||(a[i]=undefined);a[i]=g(a[i],b[i],c,d,i)})}else if(ko.v(a))a(ko.a.c(b));else{a=ko.w(ko.a.c(b));d.save(b,a)}return a}function k(a,b){var c=a;if(b)c=b(a);return ko.a.c(c)}function j(a,b,c){a=ko.a.q(ko.a.c(a),function(d){return k(d,c)==b});if(a.length!=1)throw Error("When calling ko.update*, the key '"+
b+"' was not found or not unique!");return a[0]}function v(a,b){return ko.a.s(ko.a.c(a),function(c){return b?k(c,b):c})}function t(a,b,c,d,e){c=v(b,d);var h=v(a,d);c=ko.a.t(h,c);h=0;for(var o=c.length;h<o;h++){var f=c[h];switch(f.status){case "added":f=j(ko.a.c(b),f.value,d);e("added",f);break;case "retained":f=j(b,f.value,d);e("retained",f);break;case "deleted":f=j(ko.a.c(a),f.value,d);e("deleted",f)}}}function u(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++)b(c);else for(c in a)b(c)}function r(a){return n(a)==
"object"&&a!==null&&a!==undefined}function x(a,b,c){var d=b.i[c],e=[];if(d){d instanceof Array||(d=[d]);a.B(function(h){t(e,h,c,b.e[c],function(o,f){ko.a.r(d,function(l){l(o,f)})});e=h.slice(0)})}}function w(a,b){b=b||new s;a=ko.a.c(a);if(!r(a))return a;b.save(a,a);u(a,function(c){var d=ko.a.c(a[c]);switch(n(d)){case "object":case "undefined":var e=b.h(d);a[c]=e!==undefined?e:w(d,b);break;default:a[c]=ko.a.c(d)}});return a}function s(){var a=[],b=[];this.save=function(c,d){var e=ko.a.l(a,c);if(e>=
0)b[e]=d;else{a.push(c);b.push(d)}};this.h=function(c){c=ko.a.l(a,c);return c>=0?b[c]:undefined}}ko.b={};ko.b.g=function(a,b){if(arguments.length==0)throw Error("When calling ko.fromJS, pass the object you want to convert.");return g(undefined,a,m(b))};ko.b.m=function(a,b){var c=ko.a.o(a);return ko.b.g(c,b)};ko.b.k=function(a,b,c){if(arguments.length<2)throw Error("When calling ko.updateFromJS, pass: the object to update and the object you want to update from.");return g(a,b,m(c))};ko.b.p=function(a,
b,c){b=ko.a.o(b);return ko.b.k(a,b,c)};ko.b.j=function(a){if(arguments.length==0)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");return w(a)};ko.b.toJSON=function(a){a=ko.b.j(a);return ko.a.A(a)};ko.d("ko.mapping",ko.b);ko.d("ko.mapping.fromJS",ko.b.g);ko.d("ko.mapping.fromJSON",ko.b.m);ko.d("ko.mapping.updateFromJS",ko.b.k);ko.d("ko.mapping.updateFromJSON",ko.b.p);ko.d("ko.mapping.toJS",ko.b.j);ko.d("ko.mapping.toJSON",ko.b.toJSON)})();
