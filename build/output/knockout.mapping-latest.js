// Knockout Mapping plugin v0.5
// (c) 2010 Steven Sanderson, Roy Jacobs - http://knockoutjs.com/
// License: Ms-Pl (http://www.opensource.org/licenses/ms-pl.html)

ko.d=function(m,n){for(var i=m.split("."),k=window,j=0;j<i.length-1;j++)k=k[i[j]];k[i[i.length-1]]=n};ko.t=function(m,n,i){m[n]=i};
(function(){function m(a){if(a&&typeof a==="object"&&a.constructor==(new Date).constructor)return"date";return typeof a}function n(a){a=a||{};a.create=a.create||{};a.f=a.f||{};a.h=a.h||{};return a}function i(a,c,b,d,e){function l(f){var h;if(b.create[e]&&q(c)&&!p){n();h=b.create[e](c,e)}return h||f}var p=ko.a.c(c)instanceof Array;d=d||new s;if(d.e(c))return a;e=e||"";if(p){ko.u(a)||(a=l(ko.w([])));var g=function(f){return f};if(b.f[e])g=b.f[e];var x=w(b,e),t=[];y(ko.a.c(a),c,e,g,function(f,h){switch(f){case "added":var o=
ko.a.c(i(undefined,h,b,d,e));a.push(o);break;case "retained":o=j(a,k(h,g),g);i(o,h,b,d);break;case "deleted":o=j(a,k(h,g),g);a.remove(o)}t.push({event:f,item:o})});ko.a.k(x,function(f){ko.a.k(t,function(h){f(h.event,h.item)})})}else if(q(c)){ignoreProperties=[];if(!a){a=l({});r(a,function(f){ko.n(a[f])||(ignoreProperties[f]=true)})}d.save(c,a);r(c,function(f){if(!ignoreProperties[f]){var h=d.e(c[f]);a[f]=h?h:i(a[f],c[f],b,d,e?e+"."+f:f)}})}else{switch(m(c)){case "function":a=c;break;default:if(ko.n(a))a(ko.a.c(c));
else a=ko.v(ko.a.c(c))}d.save(c,a)}return a}function k(a,c){var b=a;if(c)b=c(a);return ko.a.c(b)}function j(a,c,b){a=ko.a.q(ko.a.c(a),function(d){return k(d,b)==c});if(a.length!=1)throw Error("When calling ko.update*, the key '"+c+"' was not found or not unique!");return a[0]}function u(a,c){return ko.a.r(ko.a.c(a),function(b){return c?k(b,c):b})}function y(a,c,b,d,e){b=u(c,d);var l=u(a,d);b=ko.a.s(l,b);l=0;for(var p=b.length;l<p;l++){var g=b[l];switch(g.status){case "added":g=j(ko.a.c(c),g.value,
d);e("added",g);break;case "retained":g=j(c,g.value,d);e("retained",g);break;case "deleted":g=j(ko.a.c(a),g.value,d);e("deleted",g)}}}function r(a,c){if(a instanceof Array)for(var b=0;b<a.length;b++)c(b);else for(b in a)c(b)}function q(a){return m(a)=="object"&&a!==null&&a!==undefined}function w(a,c){var b=a.h[c];if(b){b instanceof Array||(b=[b]);return b}else return[]}function v(a,c){c=c||new s;a=ko.a.c(a);if(!q(a))return a;c.save(a,a);r(a,function(b){var d=ko.a.c(a[b]);switch(m(d)){case "object":case "undefined":var e=
c.e(d);a[b]=e!==undefined?e:v(d,c);break;default:a[b]=ko.a.c(d)}});return a}function s(){var a=[],c=[];this.save=function(b,d){var e=ko.a.l(a,b);if(e>=0)c[e]=d;else{a.push(b);c.push(d)}};this.e=function(b){b=ko.a.l(a,b);return b>=0?c[b]:undefined}}ko.b={};ko.b.g=function(a,c){if(arguments.length==0)throw Error("When calling ko.fromJS, pass the object you want to convert.");c=n(c);var b=i(undefined,a,c);b.__ko_mapping__=b.__ko_mapping__||{};b.__ko_mapping__=c;return b};ko.b.m=function(a,c){var b=ko.a.o(a);
return ko.b.g(b,c)};ko.b.j=function(a,c){if(arguments.length<2)throw Error("When calling ko.updateFromJS, pass: the object to update and the object you want to update from.");var b=a.__ko_mapping__;if(!b)throw Error("The object you are trying to update was not created by a 'fromJS' or 'fromJSON' mapping!");return i(a,c,b)};ko.b.p=function(a,c,b){c=ko.a.o(c);return ko.b.j(a,c,b)};ko.b.i=function(a){if(arguments.length==0)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");
return v(a)};ko.b.toJSON=function(a){a=ko.b.i(a);return ko.a.z(a)};ko.d("ko.mapping",ko.b);ko.d("ko.mapping.fromJS",ko.b.g);ko.d("ko.mapping.fromJSON",ko.b.m);ko.d("ko.mapping.updateFromJS",ko.b.j);ko.d("ko.mapping.updateFromJSON",ko.b.p);ko.d("ko.mapping.toJS",ko.b.i);ko.d("ko.mapping.toJSON",ko.b.toJSON)})();
