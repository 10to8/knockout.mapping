// Knockout Mapping plugin v0.5
// (c) 2010 Steven Sanderson, Roy Jacobs - http://knockoutjs.com/
// License: Ms-Pl (http://www.opensource.org/licenses/ms-pl.html)

ko.d=function(q,j){for(var i=q.split("."),k=window,l=0;l<i.length-1;l++)k=k[i[l]];k[i[i.length-1]]=j};ko.u=function(q,j,i){q[j]=i};
(function(){function q(){ko.g=function(a,c,b){b=b||{};b.t=true;a=new s(a,c,b);a.k=s;v.push(a);return a}}function j(a){if(a&&typeof a==="object"&&a.constructor==(new Date).constructor)return"date";return typeof a}function i(a,c,b){t||(v=[]);t++;a=k(a,c,b);t--;t||u(a,function(d){d&&d.k==s&&d.evaluate();return d});return a}function k(a,c,b,d,e,f){var m=ko.a.c(c)instanceof Array;d=d||new w;if(d.e(c))return a;e=e||"";if(m){ko.v(a)||(a=ko.A([]));var h=[],o=function(g){return g};if(b[e]&&b[e].key)o=b[e].key;
z(ko.a.c(a),c,o,function(g,n){switch(g){case "added":var p=ko.a.c(k(undefined,n,b,d,e,f));a.push(p);break;case "retained":p=r(a,l(n,o),o);k(p,n,b,d,e,f);break;case "deleted":p=r(a,l(n,o),o);a.remove(p)}h.push({event:g,item:p})});b[e]&&b[e].f&&ko.a.q(h,function(g){b[e].f(g.event,g.item)})}else if(j(c)=="object"&&c!==null&&c!==undefined){if(!a)if(b[e]&&b[e].create instanceof Function){q();m=b[e].create(c,f);ko.g=s;return m}else a={};d.save(c,a);x(c,function(g){var n=d.e(c[g]);a[g]=n?n:k(a[g],c[g],b,
d,e?e+"."+g:g,a)})}else switch(j(c)){case "function":a=c;break;default:if(ko.w(a))a(ko.a.c(c));else a=ko.z(ko.a.c(c))}return a}function l(a,c){var b;if(c)b=c(a);b||(b=a);return ko.a.c(b)}function r(a,c,b){a=ko.a.p(ko.a.c(a),function(d){return l(d,b)==c});if(a.length!=1)throw Error("When calling ko.update*, the key '"+c+"' was not found or not unique!");return a[0]}function y(a,c){return ko.a.r(ko.a.c(a),function(b){return c?l(b,c):b})}function z(a,c,b,d){var e=y(c,b),f=y(a,b);e=ko.a.s(f,e);f=0;for(var m=
e.length;f<m;f++){var h=e[f];switch(h.status){case "added":h=r(ko.a.c(c),h.value,b);d("added",h);break;case "retained":h=r(c,h.value,b);d("retained",h);break;case "deleted":h=r(ko.a.c(a),h.value,b);d("deleted",h)}}}function x(a,c){if(a instanceof Array)for(var b=0;b<a.length;b++)c(b);else for(b in a)c(b)}function u(a,c,b){b=b||new w;a=c(a);var d=ko.a.c(a);if(!(j(d)=="object"&&d!==null&&d!==undefined))return a;b.save(a,a);x(d,function(e){var f=d[e];switch(j(ko.a.c(f))){case "object":case "undefined":var m=
b.e(f);d[e]=m!==undefined?m:u(f,c,b);break;default:d[e]=c(f)}});return a}function w(){var a=[],c=[];this.save=function(b,d){var e=ko.a.l(a,b);if(e>=0)c[e]=d;else{a.push(b);c.push(d)}};this.e=function(b){b=ko.a.l(a,b);return b>=0?c[b]:undefined}}ko.b={};var t=0,s=ko.g,v;ko.b.h=function(a,c,b){if(arguments.length==0)throw Error("When calling ko.fromJS, pass the object you want to convert.");var d=c;d=d||{};if(d.create instanceof Function||d.key instanceof Function||d.f instanceof Function)d={"":d};
c=d;d=i(b,a,c);d.__ko_mapping__=d.__ko_mapping__||{};d.__ko_mapping__=c;return d};ko.b.m=function(a,c){var b=ko.a.n(a);return ko.b.h(b,c)};ko.b.j=function(a,c){if(arguments.length<2)throw Error("When calling ko.updateFromJS, pass: the object to update and the object you want to update from.");var b=a.__ko_mapping__;if(!b)throw Error("The object you are trying to update was not created by a 'fromJS' or 'fromJSON' mapping!");return i(a,c,b)};ko.b.o=function(a,c,b){c=ko.a.n(c);return ko.b.j(a,c,b)};
ko.b.i=function(a){if(arguments.length==0)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");return u(a,function(c){return ko.a.c(c)})};ko.b.toJSON=function(a){a=ko.b.i(a);return ko.a.B(a)};ko.d("ko.mapping",ko.b);ko.d("ko.mapping.fromJS",ko.b.h);ko.d("ko.mapping.fromJSON",ko.b.m);ko.d("ko.mapping.updateFromJS",ko.b.j);ko.d("ko.mapping.updateFromJSON",ko.b.o);ko.d("ko.mapping.toJS",ko.b.i);ko.d("ko.mapping.toJSON",ko.b.toJSON)})();
