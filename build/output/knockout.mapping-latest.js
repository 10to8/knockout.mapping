// Knockout Mapping plugin v0.5
// (c) 2010 Steven Sanderson, Roy Jacobs - http://knockoutjs.com/
// License: Ms-Pl (http://www.opensource.org/licenses/ms-pl.html)

ko.d=function(n,i){for(var j=n.split("."),o=window,m=0;m<j.length-1;m++)o=o[j[m]];o[j[j.length-1]]=i};ko.v=function(n,i,j){n[i]=j};
(function(){function n(a){if(a&&typeof a==="object"&&a.constructor.toString().match(/date/i)!==null)return"date";return typeof a}function i(a){return a}function j(a,b,c,e,g){function f(d){_options={create:c.create};return ko.a.c(ko.b.h(d,_options))}if(a===undefined)return f(b);e=e||new t;if(e.j(b))return a;e.save(b,a);if(ko.a.c(a)instanceof Array){g=g||"root";var h=i;if(c.e&&c.e[g])h=c.e[g];u(ko.a.c(a),b,g,h,function(d,k){switch(d){case "added":var p=f(k);a.push(p);break;case "retained":p=m(a,o(k,
h),h);j(p,k,c,e);break;case "deleted":p=m(a,o(k,h),h);a.remove(p)}})}else if(n(a)=="object"&&a!==null&&a!==undefined)v(b,function(d){j(a[d],b[d],c,e,d)});else if(ko.w(a))a(ko.a.c(b));else a=ko.a.c(b);return a}function o(a,b){var c=a;if(b)c=b(a);return ko.a.c(c)}function m(a,b,c){a=ko.a.r(ko.a.c(a),function(e){return o(e,c)==b});if(a.length!=1)throw Error("When calling ko.update*, the key '"+b+"' was not found or not unique!");return a[0]}function w(a,b){return ko.a.t(ko.a.c(a),function(c){return b?
o(c,b):c})}function u(a,b,c,e,g){c=w(b,e);var f=w(a,e);c=ko.a.u(f,c);f=0;for(var h=c.length;f<h;f++){var d=c[f];switch(d.status){case "added":d=m(ko.a.c(b),d.value,e);g("added",d);break;case "retained":d=m(b,d.value,e);g("retained",d);break;case "deleted":d=m(ko.a.c(a),d.value,e);g("deleted",d)}}}function v(a,b){if(a instanceof Array)for(var c=0;c<a.length;c++)b(c);else for(c in a)b(c)}function x(a,b){a=ko.a.c(a);if(b)return a;if(a instanceof Array)return ko.A(a);if(n(a)=="object"&&a!==null)return a;
return ko.z(a)}function s(a,b,c,e,g){c=c||new t;a=b.i(a);if(!(n(a)=="object"&&a!==null&&a!==undefined)){var f=b.f(a,e);return f}var h=a instanceof Array,d=h?[]:{};if(b.create)f=b.create(a,g);if(f===a)f=b.f(d,e);g=g||"root";if(h){var k=b.g[g],p=[];if(k){k instanceof Array||(k=[k]);f.C(function(q){u(p,q,g,b.e[g],function(r,l){ko.a.s(k,function(y){y(r,l)})});p=q.slice(0)})}}if(f===undefined)throw Error("Create callback did not return an object!");c.save(a,f);v(a,function(q){var r=b.i(a[q]),l;switch(n(r)){case "boolean":case "number":case "string":case "function":case "date":l=
b.f(r,h);break;case "object":case "undefined":l=c.j(r);l=l!==undefined?l:s(r,b,c,h,q)}if(h){f.push(l);f.o&&f.o(l)}else d[q]=l});return f}function t(){var a=[],b=[];this.save=function(c,e){var g=ko.a.m(a,c);if(g>=0)b[g]=e;else{a.push(c);b.push(e)}};this.j=function(c){c=ko.a.m(a,c);return c>=0?b[c]:undefined}}ko.b={};ko.b.h=function(a,b){if(arguments.length==0)throw Error("When calling ko.fromJS, pass the object you want to convert.");b=b||{};b.create=b.create||i;b.e=b.e||{};b.g=b.g||{};b.i=i;b.f=x;
return s(a,b)};ko.b.n=function(a,b){var c=ko.a.p(a);return ko.b.h(c,b)};ko.b.l=function(a,b,c){if(arguments.length<2)throw Error("When calling ko.updateFromJS, pass: the object to update and the object you want to update from.");c=c||{};c.create=c.create||i;return j(a,b,c)};ko.b.q=function(a,b,c){b=ko.a.p(b);return ko.b.l(a,b,c)};ko.b.k=function(a){if(arguments.length==0)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");options={};options.create=i;options.e=options.e||
{};options.g=options.g||{};options.i=function(b){return ko.a.c(b)};options.f=i;return s(a,options)};ko.b.toJSON=function(a){a=ko.b.k(a);return ko.a.B(a)};ko.d("ko.mapping",ko.b);ko.d("ko.mapping.fromJS",ko.b.h);ko.d("ko.mapping.fromJSON",ko.b.n);ko.d("ko.mapping.updateFromJS",ko.b.l);ko.d("ko.mapping.updateFromJSON",ko.b.q);ko.d("ko.mapping.toJS",ko.b.k);ko.d("ko.mapping.toJSON",ko.b.toJSON)})();
