// Knockout Mapping plugin v0.5
// (c) 2010 Steven Sanderson, Roy Jacobs - http://knockoutjs.com/
// License: Ms-Pl (http://www.opensource.org/licenses/ms-pl.html)

ko.d=function(m,o){for(var h=m.split("."),k=window,j=0;j<h.length-1;j++)k=k[h[j]];k[h[h.length-1]]=o};ko.r=function(m,o,h){m[o]=h};
(function(){function m(a){if(a&&typeof a==="object"&&a.constructor==(new Date).constructor)return"date";return typeof a}function o(a){a=a||{};a.create=a.create;a.key=a.key||function(){};a.e=a.e;return a}function h(a,c,b,d,e,l){function n(f){var i;if(r(c)&&!q){o();i=b.create(c,l,e)}return i||f}var q=ko.a.c(c)instanceof Array;d=d||new s;if(d.f(c))return a;e=e||"";if(q){ko.s(a)||(a=ko.v([]));var g=[];w(ko.a.c(a),c,e,b.key,function(f,i){switch(f){case "added":var p=ko.a.c(h(undefined,i,b,d,e,l));a.push(p);
break;case "retained":p=j(a,k(i,e,b.key),e,b.key);h(p,i,b,d,e,l);break;case "deleted":p=j(a,k(i,e,b.key),e,b.key);a.remove(p)}g.push({event:f,item:p})});b.e&&ko.a.o(g,function(f){b.e(f.event,f.item,e)})}else if(r(c)){if(b.create&&!a)if(a=n())return a;a||(a={});d.save(c,a);t(c,function(f){var i=d.f(c[f]);a[f]=i?i:h(a[f],c[f],b,d,e?e+"."+f:f,a)})}else switch(m(c)){case "function":a=c;break;default:if(ko.t(a))a(ko.a.c(c));else a=ko.u(ko.a.c(c))}return a}function k(a,c,b){var d;if(b)d=b(a,c);d||(d=a);
return ko.a.c(d)}function j(a,c,b,d){a=ko.a.n(ko.a.c(a),function(e){return k(e,b,d)==c});if(a.length!=1)throw Error("When calling ko.update*, the key '"+c+"' was not found or not unique!");return a[0]}function u(a,c,b){return ko.a.p(ko.a.c(a),function(d){return b?k(d,c,b):d})}function w(a,c,b,d,e){var l=u(c,b,d),n=u(a,b,d);l=ko.a.q(n,l);n=0;for(var q=l.length;n<q;n++){var g=l[n];switch(g.status){case "added":g=j(ko.a.c(c),g.value,b,d);e("added",g);break;case "retained":g=j(c,g.value,b,d);e("retained",
g);break;case "deleted":g=j(ko.a.c(a),g.value,b,d);e("deleted",g)}}}function t(a,c){if(a instanceof Array)for(var b=0;b<a.length;b++)c(b);else for(b in a)c(b)}function r(a){return m(a)=="object"&&a!==null&&a!==undefined}function v(a,c){c=c||new s;a=ko.a.c(a);if(!r(a))return a;c.save(a,a);t(a,function(b){var d=ko.a.c(a[b]);switch(m(d)){case "object":case "undefined":var e=c.f(d);a[b]=e!==undefined?e:v(d,c);break;default:a[b]=ko.a.c(d)}});return a}function s(){var a=[],c=[];this.save=function(b,d){var e=
ko.a.j(a,b);if(e>=0)c[e]=d;else{a.push(b);c.push(d)}};this.f=function(b){b=ko.a.j(a,b);return b>=0?c[b]:undefined}}ko.b={};ko.b.g=function(a,c){if(arguments.length==0)throw Error("When calling ko.fromJS, pass the object you want to convert.");c=o(c);var b=h(undefined,a,c);b.__ko_mapping__=b.__ko_mapping__||{};b.__ko_mapping__=c;return b};ko.b.k=function(a,c){var b=ko.a.l(a);return ko.b.g(b,c)};ko.b.i=function(a,c){if(arguments.length<2)throw Error("When calling ko.updateFromJS, pass: the object to update and the object you want to update from.");
var b=a.__ko_mapping__;if(!b)throw Error("The object you are trying to update was not created by a 'fromJS' or 'fromJSON' mapping!");return h(a,c,b)};ko.b.m=function(a,c,b){c=ko.a.l(c);return ko.b.i(a,c,b)};ko.b.h=function(a){if(arguments.length==0)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");return v(a)};ko.b.toJSON=function(a){a=ko.b.h(a);return ko.a.w(a)};ko.d("ko.mapping",ko.b);ko.d("ko.mapping.fromJS",ko.b.g);ko.d("ko.mapping.fromJSON",ko.b.k);ko.d("ko.mapping.updateFromJS",
ko.b.i);ko.d("ko.mapping.updateFromJSON",ko.b.m);ko.d("ko.mapping.toJS",ko.b.h);ko.d("ko.mapping.toJSON",ko.b.toJSON)})();
